<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MarktCheck</title>
  <link rel="stylesheet" href="style.css">

  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#5b2bd1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="MarktCheck">
  <link rel="apple-touch-icon" href="assets/icons/apple-touch-icon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no">
</head>

<body>
<script>
  if (localStorage.getItem("marktcheck.auth") !== "1") {
    window.location.href = "index.html";
  }
</script>

<div class="container">
  <div class="header" style="position:sticky">
    <div class="topRight">
      <div class="pill pill-progress" id="counterPill">0 / 0</div>
      <div class="pill pill-status" id="statusPill">
        <span class="badge ok">âœ… DA <b id="countOk">0</b></span>
        <span class="badge no">âŒ NICHT DA <b id="countNo">0</b></span>
      </div>
      <button class="iconBtn" id="btnExportTop" title="Zur Export-Ãœbersicht">ğŸ“„</button>
    </div>

    <div class="titleRow">
      <h1 class="title">MarktCheck</h1>
    </div>
    <div class="sub" id="datetime">â€”</div>
  </div>

  <div class="card" id="productCard">
    <div class="card-head">
      <b id="sectionName">â€”</b>
      <select id="jumpSelect" class="jumpSelect"></select>
      <span id="sectionCount">â€”</span>
    </div>

    <div class="product">
      <div class="nameTop" id="name">â€”</div>

      <div class="imgBox">
        <div class="fallback" id="imgFallback">Kein Bild</div>
        <img id="img" alt="" style="display:none" />
      </div>

      <div class="price" id="price">Preis: â€”</div>
      <div class="content" id="content">Inhalt: â€”</div>

      <div class="actions">
        <button class="btn no" id="btnNo">âŒ Nicht da</button>
        <button class="btn ok" id="btnOk">âœ… Da</button>
      </div>

      <div class="hint">Tasten: â† Nein Â· â†’ Ja Â· â†“ Skip</div>
    </div>
  </div>

  <div class="summary" id="summary">
    <h2 style="margin:0 0 10px;font-size:18px">Ergebnis</h2>

    <div class="field">
      <label>Marktname</label>
      <input id="marketName" />
    </div>

    <div class="field">
      <label>Erstellt von</label>
      <input id="createdBy" />
    </div>

    <div class="field">
      <label>Datum & Uhrzeit</label>
      <input id="stamp" readonly />
    </div>

    <div class="toggleRow">
      <div>
        <div class="tTitle">Export-Filter</div>
        <div class="tSub">Nur â€NICHT DAâ€œ anzeigen</div>
      </div>
      <input id="onlyMissing" type="checkbox" checked />
    </div>

    <div class="actions">
      <button class="miniBtn" id="btnBack">â¬…ï¸ ZurÃ¼ck</button>
      <button class="miniBtn" id="btnReset">â™»ï¸ Reset</button>
      <button class="miniBtn primary" id="btnPrint">ğŸ–¨ï¸ PDF</button>
    </div>

    <div class="toast" id="toast"></div>

    <div class="tableWrap">
      <table id="resultTable">
        <thead>
          <tr>
            <th>Bereich</th><th>Produkt</th><th>Preis</th><th>Inhalt</th><th>Status</th><th>Aktion</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

<script>
  const btnExportTop = document.getElementById("btnExportTop");
  const summary = document.getElementById("summary");
  const card = document.getElementById("productCard");

  if (btnExportTop) {
    btnExportTop.addEventListener("click", () => {
      card.style.display = "none";
      summary.style.display = "block";
    });
  }
</script>

<script>
  if ("serviceWorker" in navigator) {
    window.addEventListener("load", () => {
      navigator.serviceWorker.register("./sw.js").catch(()=>{});
    });
  }
</script>

</body>
</html>
